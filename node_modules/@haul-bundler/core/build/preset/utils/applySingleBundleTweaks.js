"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = applySingleBundleTweaks;

var _path = _interopRequireDefault(require("path"));

var _compileTemplate = _interopRequireDefault(require("./compileTemplate"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function applySingleBundleTweaks(env, templatesConfig, bundleConfig, webpackConfig) {
  if (env.bundleOutput) {
    webpackConfig.output.filename = _path.default.isAbsolute(env.bundleOutput) ? _path.default.relative(webpackConfig.output.path, env.bundleOutput) : _path.default.relative(webpackConfig.output.path, _path.default.join(bundleConfig.root, env.bundleOutput));
  } else {
    webpackConfig.output.filename = (0, _compileTemplate.default)(templatesConfig.filename[env.bundleTarget === 'server' ? '__server__' : bundleConfig.platform], {
      bundleName: bundleConfig.name,
      platform: bundleConfig.platform,
      type: bundleConfig.dll ? 'dll' : bundleConfig.app ? 'app' : 'default',
      mode: bundleConfig.dev ? 'dev' : 'prod'
    });
  }
}
//# sourceMappingURL=applySingleBundleTweaks.js.map