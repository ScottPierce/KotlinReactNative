{"version":3,"sources":["../../../src/preset/utils/getSourceMapPlugin.ts"],"names":["getSourceMapPlugin","bundleConfig","serverConfig","sourceMapFilename","baseOptions","test","module","type","undefined","sourceMap","webpack","EvalSourceMapDevToolPlugin","publicPath","host","port","SourceMapDevToolPlugin","filename","moduleFilenameTemplate"],"mappings":";;;;;;;AAAA;;;;AAMe,SAASA,kBAAT,CACbC,YADa,EAEbC,YAFa,EAGbC,iBAHa,EAIb;AACA,QAAMC,WAAW,GAAG;AAClBC,IAAAA,IAAI,EAAE,0CADY;AAElBC,IAAAA,MAAM,EAAE;AAFU,GAApB;;AAKA,MAAIL,YAAY,CAACM,IAAb,KAAsB,cAA1B,EAA0C;AACxC,WAAOC,SAAP;AACD;;AAED,MAAIP,YAAY,CAACQ,SAAb,KAA2B,QAA/B,EAAyC;AACvC,WAAO,IAAIC,iBAAQC,0BAAZ,CAAuC,EAC5C,GAAGP,WADyC;AAE5CQ,MAAAA,UAAU,EAAG,UAASV,YAAY,CAACW,IAAK,IAAGX,YAAY,CAACY,IAAK;AAFjB,KAAvC,CAAP;AAID,GALD,MAKO,IAAIb,YAAY,CAACQ,SAAjB,EAA4B;AACjC,WAAO,IAAIC,iBAAQK,sBAAZ,CAAmC,EACxC,GAAGX,WADqC;AAExCY,MAAAA,QAAQ,EAAEb,iBAF8B;AAGxCc,MAAAA,sBAAsB,EAAE;AAHgB,KAAnC,CAAP;AAKD;;AAED,SAAOT,SAAP;AACD","sourcesContent":["import webpack from 'webpack';\nimport {\n  NormalizedServerConfig,\n  NormalizedBundleConfig,\n} from '../../config/types';\n\nexport default function getSourceMapPlugin(\n  bundleConfig: NormalizedBundleConfig,\n  serverConfig: NormalizedServerConfig,\n  sourceMapFilename: string\n) {\n  const baseOptions = {\n    test: /\\.(js|jsx|css|ts|tsx|(js)?bundle)($|\\?)/i,\n    module: true,\n  };\n\n  if (bundleConfig.type !== 'basic-bundle') {\n    return undefined;\n  }\n\n  if (bundleConfig.sourceMap === 'inline') {\n    return new webpack.EvalSourceMapDevToolPlugin({\n      ...baseOptions,\n      publicPath: `http://${serverConfig.host}:${serverConfig.port}/`,\n    } as webpack.EvalSourceMapDevToolPluginOptions);\n  } else if (bundleConfig.sourceMap) {\n    return new webpack.SourceMapDevToolPlugin({\n      ...baseOptions,\n      filename: sourceMapFilename,\n      moduleFilenameTemplate: '[absolute-resource-path]',\n    });\n  }\n\n  return undefined;\n}\n"],"file":"getSourceMapPlugin.js"}