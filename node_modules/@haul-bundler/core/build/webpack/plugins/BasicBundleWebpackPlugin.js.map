{"version":3,"sources":["../../../src/webpack/plugins/BasicBundleWebpackPlugin.ts"],"names":["BasicBundleWebpackPlugin","constructor","preloadBundles","apply","compiler","hooks","compilation","tap","mainTemplate","bootstrap","source","preload","length","map","bundleName"],"mappings":";;;;;;;;;AAEA;;;AAGe,MAAMA,wBAAN,CAA+B;AAG5CC,EAAAA,WAAW,CAAC;AAAEC,IAAAA;AAAF,GAAD,EAAoD;AAAA;;AAC7D,SAAKA,cAAL,GAAsBA,cAAc,IAAI,EAAxC;AACD;;AAEDC,EAAAA,KAAK,CAACC,QAAD,EAA6B;AAChCA,IAAAA,QAAQ,CAACC,KAAT,CAAeC,WAAf,CAA2BC,GAA3B,CAA+B,0BAA/B,EAA2DD,WAAW,IAAI;AACvEA,MAAAA,WAAW,CAACE,YAAb,CAAkCH,KAAlC,CAAwCI,SAAxC,CAAkDF,GAAlD,CACE,0BADF,EAEGG,MAAD,IAAoB;AAClB,cAAMC,OAAO,GAAG,KAAKT,cAAL,CAAoBU,MAApB,GACX,GAAE,KAAKV,cAAL,CAAoBW,GAApB,CACDC,UAAU,IACP,cAAaA,UAAW,kCAAiCA,UAAW,qBAFtE,CAGD,IAJU,GAKZ,EALJ;AAMA,eAAQ,GAAEH,OAAQ,KAAID,MAAO,EAA7B;AACD,OAVH;AAYD,KAbD;AAcD;;AAtB2C","sourcesContent":["import webpack from 'webpack';\n\n/**\n * Adds React Native specific tweaks to bootstrap logic.\n */\nexport default class BasicBundleWebpackPlugin {\n  private preloadBundles: string[];\n\n  constructor({ preloadBundles }: { preloadBundles?: string[] }) {\n    this.preloadBundles = preloadBundles || [];\n  }\n\n  apply(compiler: webpack.Compiler) {\n    compiler.hooks.compilation.tap('BasicBundleWebpackPlugin', compilation => {\n      (compilation.mainTemplate as any).hooks.bootstrap.tap(\n        'BasicBundleWebpackPlugin',\n        (source: string) => {\n          const preload = this.preloadBundles.length\n            ? `${this.preloadBundles.map(\n                bundleName =>\n                  `if (!this[\"${bundleName}\"]) { this.bundleRegistryLoad(\"${bundleName}\", true, true); }\\n`\n              )}\\n`\n            : '';\n          return `${preload}\\n${source}`;\n        }\n      );\n    });\n  }\n}\n"],"file":"BasicBundleWebpackPlugin.js"}