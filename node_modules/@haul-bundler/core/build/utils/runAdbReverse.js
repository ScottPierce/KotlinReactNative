"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = runAdbReverse;

var _child_process = require("child_process");

function runAdbReverse(runtime, port) {
  const androidHome = process.env.ANDROID_HOME;
  const adb = androidHome ? `${androidHome}/platform-tools/adb` : 'adb';
  const command = `${adb} reverse tcp:${port} tcp:${port}`;
  return new Promise(resolve => {
    (0, _child_process.exec)(command, error => {
      if (error) {
        // Get just the error message
        const message = error.message.split('error:')[1] || error.message;
        runtime.logger.warn(`Failed to run: ${command} - ${message.trim()}`);
        resolve();
        return;
      }

      runtime.logger.done(`Successfully run: ${command}`);
      resolve();
    });
  });
}
//# sourceMappingURL=runAdbReverse.js.map