{"version":3,"sources":["../../src/server/NonInteractiveUI.ts"],"names":["NonInteractiveUserInterface","constructor","runtime","updateCompilationProgress","platform","running","value","percent","Math","floor","min","logger","info","toUpperCase","addLogItem","item","print","dispose","exitCode","exit","process","start","platforms","done","join"],"mappings":";;;;;;;AAGe,MAAMA,2BAAN,CAA2D;AACxEC,EAAAA,WAAW,CAASC,OAAT,EAA2B;AAAA,SAAlBA,OAAkB,GAAlBA,OAAkB;AAAE;;AAExCC,EAAAA,yBAAyB,CACvBC,QADuB,EAEvB;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,GAFuB,EAGvB;AACA,QAAID,OAAJ,EAAa;AACX,YAAME,OAAO,GAAI,GAAEC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,GAAL,CAAS,CAAT,EAAYJ,KAAZ,IAAqB,GAAhC,CAAqC,GAAxD;AACA,WAAKJ,OAAL,CAAaS,MAAb,CAAoBC,IAApB,CACG,IAAGR,QAAQ,CAACS,WAAT,EAAuB,4BAA2BN,OAAQ,GADhE;AAGD,KALD,MAKO;AACL,WAAKL,OAAL,CAAaS,MAAb,CAAoBC,IAApB,CACG,IAAGR,QAAQ,CAACS,WAAT,EAAuB,sBAD7B;AAGD;AACF;;AAEDC,EAAAA,UAAU,CAACC,IAAD,EAAe;AACvB;AACA,SAAKb,OAAL,CAAaS,MAAb,CAAoBK,KAApB,CAA0B,OAA1B,EAAmCD,IAAnC;AACD;;AAEDE,EAAAA,OAAO,CAACC,QAAgB,GAAG,CAApB,EAAuBC,IAAa,GAAG,IAAvC,EAA6C;AAClD,QAAIA,IAAJ,EAAU;AACRC,MAAAA,OAAO,CAACD,IAAR,CAAaD,QAAb;AACD;AACF;;AAEDG,EAAAA,KAAK,CAACC,SAAD,EAAsB;AACzB,SAAKpB,OAAL,CAAaS,MAAb,CAAoBY,IAApB,CAAyB,iCAAzB;AACA,SAAKrB,OAAL,CAAaS,MAAb,CAAoBC,IAApB,CAA0B,wBAAuBU,SAAS,CAACE,IAAV,CAAe,IAAf,CAAqB,EAAtE;AACD;;AAjCuE","sourcesContent":["import Runtime from '../runtime/Runtime';\nimport UserInterface from './UI';\n\nexport default class NonInteractiveUserInterface implements UserInterface {\n  constructor(private runtime: Runtime) {}\n\n  updateCompilationProgress(\n    platform: string,\n    { running, value }: { running: boolean; value: number }\n  ) {\n    if (running) {\n      const percent = `${Math.floor(Math.min(1, value) * 100)}%`;\n      this.runtime.logger.info(\n        `[${platform.toUpperCase()}] Compilation - running (${percent})`\n      );\n    } else {\n      this.runtime.logger.info(\n        `[${platform.toUpperCase()}] Compilation - idle`\n      );\n    }\n  }\n\n  addLogItem(item: string) {\n    // `item` should be already enhanced with ANSI escape codes\n    this.runtime.logger.print('print', item);\n  }\n\n  dispose(exitCode: number = 0, exit: boolean = true) {\n    if (exit) {\n      process.exit(exitCode);\n    }\n  }\n\n  start(platforms: string[]) {\n    this.runtime.logger.done('Running in non-interactive mode');\n    this.runtime.logger.info(`Available platforms: ${platforms.join(', ')}`);\n  }\n}\n"],"file":"NonInteractiveUI.js"}