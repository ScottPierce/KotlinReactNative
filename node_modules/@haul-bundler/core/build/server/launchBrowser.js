"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = launchBrowser;

var _open = _interopRequireDefault(require("open"));

var _platformSelect = _interopRequireDefault(require("platform-select"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/**
 * Launches given `url` in browser based on platform
 */
function launchBrowser(runtime, url) {
  const openWith = app => () => (0, _open.default)(url, {
    app
  });
  /**
   * Run Chrome (Chrome Canary) or supported platform.
   * In case of macOS, we can eventually fallback to Safari.
   *
   * select(attemp1, attemp2, attemp3,...) // attempt to run is from left to right
   */


  (0, _platformSelect.default)({
    // try to find & run Google Chrome
    darwin: openWith('google chrome'),
    win32: openWith('chrome'),
    _: openWith('google-chrome')
  }, {
    // On macOS let's try to find & run Canary
    darwin: openWith('google chrome canary')
  }, {
    // No Canary / Chrome, let's run Safari
    darwin: openWith('safari')
  }).catch(error => {
    runtime.logger.warn(`Cannot start browser for debugging. Navigate manually to "${url}": ${error.message}`);
  });
}
//# sourceMappingURL=launchBrowser.js.map