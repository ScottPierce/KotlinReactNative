{"version":3,"sources":["../../src/compiler/createWebSocketServer.js"],"names":["getPort","require","http","Server","module","exports","createWebSocketServer","httpServer","createServer","webSocketServer","server","perMessageDeflate","maxPayload","port","listen"],"mappings":";;AAAA;;;;;;AAOA,MAAMA,OAAO,GAAGC,OAAO,CAAC,UAAD,CAAvB;;AACA,MAAMC,IAAI,GAAGD,OAAO,CAAC,MAAD,CAApB;;AACA,MAAM;AAAEE,EAAAA;AAAF,IAAaF,OAAO,CAAC,IAAD,CAA1B;AAEA;;;;;AAGAG,MAAM,CAACC,OAAP,GAAiB,eAAeC,qBAAf,GAAuC;AACtD,QAAMC,UAAU,GAAGL,IAAI,CAACM,YAAL,EAAnB;AACA,QAAMC,eAAe,GAAG,IAAIN,MAAJ,CAAW;AACjCO,IAAAA,MAAM,EAAEH,UADyB;AAEjCI,IAAAA,iBAAiB,EAAE,KAFc;AAGjCC,IAAAA,UAAU,EAAE,MAAM,IAAN,GAAa;AAHQ,GAAX,CAAxB;AAMA,QAAMC,IAAI,GAAG,MAAMb,OAAO,EAA1B;AACAO,EAAAA,UAAU,CAACO,MAAX,CAAkBD,IAAlB;AAEA,SAAOJ,eAAP;AACD,CAZD","sourcesContent":["/**\n * Copyright 2017-present, Callstack.\n * All rights reserved.\n *\n * @flow\n */\n\nconst getPort = require('get-port');\nconst http = require('http');\nconst { Server } = require('ws');\n\n/**\n * Create WebSocket server using HTTP server over Unix socket.\n */\nmodule.exports = async function createWebSocketServer() {\n  const httpServer = http.createServer();\n  const webSocketServer = new Server({\n    server: httpServer,\n    perMessageDeflate: false,\n    maxPayload: 200 * 1024 * 1024,\n  });\n\n  const port = await getPort();\n  httpServer.listen(port);\n\n  return webSocketServer;\n};\n"],"file":"createWebSocketServer.js"}